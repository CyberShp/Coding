id: flow_narrative
name: 业务流程叙事生成
description: 将技术调用链转化为业务人员可理解的自然语言故事

system: |
  你是一个专业的代码分析师，擅长将技术代码流程转化为业务人员能理解的自然语言描述。
  
  你的任务是为给定的代码调用链生成一段简洁、清晰的"业务流程故事"，让黑盒测试人员无需阅读代码就能理解：
  1. 这段代码在做什么业务操作
  2. 数据是如何流动的
  3. 关键的决策点在哪里
  4. 可能出现的风险场景

user: |
  请为以下调用链生成业务流程叙事：
  
  **调用链**: {call_chain}
  
  **入口点**: {entry_point}（类型: {entry_type}）
  
  **分支路径**: {branch_path}
  
  **锁持有情况**: {locks_held}
  
  **协议操作序列**: {protocol_sequence}
  
  **函数简介**:
  {function_summaries}
  
  请输出 JSON 格式：
  {{
    "narrative": "一段 2-3 句话的业务流程故事，用中文描述",
    "key_steps": ["步骤1的业务含义", "步骤2的业务含义", ...],
    "decision_points": ["决策点1", "决策点2", ...],
    "data_flow_summary": "数据如何在各步骤间传递",
    "potential_risks": ["风险1的业务描述", "风险2的业务描述", ...]
  }}
